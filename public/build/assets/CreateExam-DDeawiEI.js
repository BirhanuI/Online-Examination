import{j as e,r as m,W as J,Y as K}from"./app-CN7q16mo.js";import{A as X}from"./AuthenticatedLayout-CiCN0ePb.js";import{B as E}from"./react-toastify.esm-AZ9YETI_.js";import Z from"./addSubject-BaU3Ah1K.js";import{P as ee,T as h,F as oe,I as se,S as te,a as re}from"./TextField-DqoJh2cB.js";import{M as I}from"./MenuItem-Dvm1UbDa.js";import{u as ae,C as ne,A as B}from"./useSlot-DZ1y84iZ.js";import{B as G}from"./Button-CVdFnAHl.js";import{c as V,g as q,b as $,s as w,u as T,_ as M,d as ie,e as b,a as S,f as k,B as le}from"./ButtonBase-CuqmQs8a.js";import{R as A}from"./Radio-DbFPVcr2.js";import"./transition-CC_gOjYu.js";import"./dividerClasses-fTeXa3y0.js";import"./IconButton-l2uRd08m.js";import"./Modal-11_RrgoX.js";import"./useFormControl-BD7yWTeC.js";import"./SwitchBase-BdaAChQS.js";const de=V(e.jsx("path",{d:"m7 10 5 5 5-5z"}),"ArrowDropDown"),ce=V(e.jsx("path",{d:"M19 13H5v-2h14z"}),"Remove"),Q=m.createContext({});function ue(s){return $("MuiAccordion",s)}const N=q("MuiAccordion",["root","rounded","expanded","disabled","gutters","region"]),pe=["children","className","defaultExpanded","disabled","disableGutters","expanded","onChange","square","slots","slotProps","TransitionComponent","TransitionProps"],me=s=>{const{classes:t,square:i,expanded:o,disabled:d,disableGutters:c}=s;return k({root:["root",!i&&"rounded",o&&"expanded",d&&"disabled",!c&&"gutters"],region:["region"]},ue,t)},xe=w(ee,{name:"MuiAccordion",slot:"Root",overridesResolver:(s,t)=>{const{ownerState:i}=s;return[{[`& .${N.region}`]:t.region},t.root,!i.square&&t.rounded,!i.disableGutters&&t.gutters]}})(({theme:s})=>{const t={duration:s.transitions.duration.shortest};return{position:"relative",transition:s.transitions.create(["margin"],t),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(s.vars||s).palette.divider,transition:s.transitions.create(["opacity","background-color"],t)},"&:first-of-type":{"&::before":{display:"none"}},[`&.${N.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},[`&.${N.disabled}`]:{backgroundColor:(s.vars||s).palette.action.disabledBackground}}},({theme:s})=>({variants:[{props:t=>!t.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(s.vars||s).shape.borderRadius,borderTopRightRadius:(s.vars||s).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(s.vars||s).shape.borderRadius,borderBottomRightRadius:(s.vars||s).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:t=>!t.disableGutters,style:{[`&.${N.expanded}`]:{margin:"16px 0"}}}]})),fe=m.forwardRef(function(t,i){const o=T({props:t,name:"MuiAccordion"}),{children:d,className:c,defaultExpanded:u=!1,disabled:x=!1,disableGutters:l=!1,expanded:j,onChange:g,square:C=!1,slots:v={},slotProps:a={},TransitionComponent:r,TransitionProps:n}=o,f=M(o,pe),[p,P]=ie({controlled:j,default:u,name:"Accordion",state:"expanded"}),_=m.useCallback(Y=>{P(!p),g&&g(Y,!p)},[p,g,P]),[R,...U]=m.Children.toArray(d),F=m.useMemo(()=>({expanded:p,disabled:x,disableGutters:l,toggle:_}),[p,x,l,_]),D=b({},o,{square:C,disabled:x,disableGutters:l,expanded:p}),W=me(D),L=b({transition:r},v),H=b({transition:n},a),[z,O]=ae("transition",{elementType:ne,externalForwardedProps:{slots:L,slotProps:H},ownerState:D});return e.jsxs(xe,b({className:S(W.root,c),ref:i,ownerState:D,square:C},f,{children:[e.jsx(Q.Provider,{value:F,children:R}),e.jsx(z,b({in:p,timeout:"auto"},O,{children:e.jsx("div",{"aria-labelledby":R.props.id,id:R.props["aria-controls"],role:"region",className:W.region,children:U})}))]}))});function he(s){return $("MuiAccordionDetails",s)}q("MuiAccordionDetails",["root"]);const ge=["className"],be=s=>{const{classes:t}=s;return k({root:["root"]},he,t)},ve=w("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:(s,t)=>t.root})(({theme:s})=>({padding:s.spacing(1,2,2)})),je=m.forwardRef(function(t,i){const o=T({props:t,name:"MuiAccordionDetails"}),{className:d}=o,c=M(o,ge),u=o,x=be(u);return e.jsx(ve,b({className:S(x.root,d),ref:i,ownerState:u},c))});function Ce(s){return $("MuiAccordionSummary",s)}const y=q("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),ye=["children","className","expandIcon","focusVisibleClassName","onClick"],we=s=>{const{classes:t,expanded:i,disabled:o,disableGutters:d}=s;return k({root:["root",i&&"expanded",o&&"disabled",!d&&"gutters"],focusVisible:["focusVisible"],content:["content",i&&"expanded",!d&&"contentGutters"],expandIconWrapper:["expandIconWrapper",i&&"expanded"]},Ce,t)},Ae=w(le,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:(s,t)=>t.root})(({theme:s})=>{const t={duration:s.transitions.duration.shortest};return{display:"flex",minHeight:48,padding:s.spacing(0,2),transition:s.transitions.create(["min-height","background-color"],t),[`&.${y.focusVisible}`]:{backgroundColor:(s.vars||s).palette.action.focus},[`&.${y.disabled}`]:{opacity:(s.vars||s).palette.action.disabledOpacity},[`&:hover:not(.${y.disabled})`]:{cursor:"pointer"},variants:[{props:i=>!i.disableGutters,style:{[`&.${y.expanded}`]:{minHeight:64}}}]}}),Ne=w("div",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:(s,t)=>t.content})(({theme:s})=>({display:"flex",flexGrow:1,margin:"12px 0",variants:[{props:t=>!t.disableGutters,style:{transition:s.transitions.create(["margin"],{duration:s.transitions.duration.shortest}),[`&.${y.expanded}`]:{margin:"20px 0"}}}]})),Se=w("div",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:(s,t)=>t.expandIconWrapper})(({theme:s})=>({display:"flex",color:(s.vars||s).palette.action.active,transform:"rotate(0deg)",transition:s.transitions.create("transform",{duration:s.transitions.duration.shortest}),[`&.${y.expanded}`]:{transform:"rotate(180deg)"}})),Re=m.forwardRef(function(t,i){const o=T({props:t,name:"MuiAccordionSummary"}),{children:d,className:c,expandIcon:u,focusVisibleClassName:x,onClick:l}=o,j=M(o,ye),{disabled:g=!1,disableGutters:C,expanded:v,toggle:a}=m.useContext(Q),r=p=>{a&&a(p),l&&l(p)},n=b({},o,{expanded:v,disabled:g,disableGutters:C}),f=we(n);return e.jsxs(Ae,b({focusRipple:!1,disableRipple:!0,disabled:g,component:"div","aria-expanded":v,className:S(f.root,c),focusVisibleClassName:S(f.focusVisible,x),onClick:r,ref:i,ownerState:n},j,{children:[e.jsx(Ne,{className:f.content,ownerState:n,children:d}),u&&e.jsx(Se,{className:f.expandIconWrapper,ownerState:n,children:u})]}))}),Fe=({auth:s,exam:t,subject:i})=>{const o=J({title:t?t.title:"",description:t?t.description:"",start_date:t?t.start_date:"",end_date:t?t.end_date:"",duration:t?t.duration:"",subject_id:t?t.subject_id:"",grade:t?t.grade:"",questions:t?t.questions:[{question:"",option1:"",option2:"",option3:"",option4:"",answer:"option1",description:""}]}),d=a=>{a.preventDefault(),t?o.put(`/exam/${t.id}`,{onSuccess:()=>{E.success("Exam updated successfully")}}):o.post("/exam",{onSuccess:()=>{E.success("Exam created successfully"),u()}})};function c(){o.setData("questions",[...o.data.questions,{question:"",option1:"",option2:"",option3:"",option4:"",answer:"option1",description:""}])}const u=()=>{o.setData({title:"",description:"",start_date:"",end_date:"",duration:"",subject_id:"",grade:"",questions:[{question:"",option1:"",option2:"",option3:"",option4:"",answer:"option1",description:""}]})};function x(a){if(o.data.questions.length===1)return null;const r=[...o.data.questions];r.splice(a,1),console.log(r),o.setData("questions",r)}const l=(a,r,n)=>{o.clearErrors();const f=[...o.data.questions];f[a][r]=n,o.setData({...o.data,questions:f})},[j,g]=m.useState(0),[C,v]=m.useState(!1);return e.jsxs(X,{user:s.user,children:[e.jsx(K,{title:"Add Exam"}),e.jsx(Z,{show:C,onClose:v}),e.jsx("div",{className:"w-full p-5",children:e.jsx("div",{className:" rounded-md gap-5",children:e.jsxs("form",{onSubmit:d,className:"flex flex-col gap-5 w-full",children:[e.jsxs("div",{className:"flex w-full gap-5",children:[e.jsxs("div",{className:"w-[30%] flex flex-col gap-5 bg-white p-5 py-10 rounded-md shadow-md",children:[e.jsx("p",{className:"font-space text-lg font-semibold",children:"Exam Details"}),e.jsx(h,{label:"Grade",fullWidth:!0,type:"number",error:o.errors.grade,helperText:o.errors.grade,value:o.data.grade,onChange:a=>o.setData("grade",a.target.value)}),e.jsxs(oe,{fullWidth:!0,error:o.errors.subject_id,children:[e.jsx(se,{children:"Subject"}),e.jsxs(te,{value:o.data.subject_id,label:"Subject",onChange:a=>o.setData("subject_id",a.target.value),children:[e.jsx(I,{value:"",onClick:()=>v(!0),children:e.jsxs("div",{className:"text-gray-400",children:[e.jsx(B,{})," add Subject"]})}),i.map(a=>e.jsx(I,{value:a.id,children:a.name},a.id))]}),e.jsx(re,{children:o.errors.subject_id})]}),e.jsx(h,{label:"Title",id:"outlined-basic",variant:"outlined",error:o.errors.title,helperText:o.errors.title,fullWidth:!0,sx:{outline:"none"},value:o.data.title,onChange:a=>o.setData("title",a.target.value)}),e.jsx(h,{label:"Duration(minutes)",id:"outlined-basic",variant:"outlined",error:o.errors.duration,helperText:o.errors.duration,fullWidth:!0,value:o.data.duration,onChange:a=>o.setData("duration",a.target.value)}),e.jsx(h,{label:"Description",id:"outlined-basic",variant:"outlined",error:o.errors.description,helperText:o.errors.description,fullWidth:!0,value:o.data.description,onChange:a=>o.setData("description",a.target.value)})]}),e.jsxs("div",{className:"w-[70%] bg-white rounded-md shadow-md p-5 py-10",children:[e.jsxs("div",{className:"flex justify-between items-center cursor-pointer",children:[e.jsx("p",{className:"font-space text-lg font-semibold",children:"Questions"}),e.jsxs(G,{onClick:c,variant:"contained",children:[e.jsx(B,{}),"Add Question"]})]}),e.jsx("div",{className:"mt-5 flex flex-col gap-1",children:o.data.questions.map((a,r)=>e.jsxs("div",{className:"flex gap-1",children:[e.jsxs(fe,{expanded:j===r,onChange:()=>g(j===r?-1:r),className:"w-full rounded-md",children:[e.jsxs(Re,{expandIcon:e.jsx(de,{}),children:["Question #",r+1]}),e.jsx(je,{children:e.jsxs("div",{className:"",children:[e.jsx(h,{error:o.errors[`questions.${r}.question`],helperText:o.errors[`questions.${r}.question`],onChange:n=>l(r,"question",n.target.value),value:a.question,label:"Please insert question here...",multiline:!0,rows:3,fullWidth:!0}),e.jsxs("div",{className:"",children:[e.jsxs("div",{className:"flex py-5 justify-between",children:[e.jsxs("div",{className:"flex ",children:[e.jsx(A,{value:"option1",checked:a.answer==="option1",onChange:n=>l(r,"answer",n.target.value)}),e.jsx(h,{label:"option A",error:o.errors[`questions.${r}.option1`],helperText:o.errors[`questions.${r}.option1`],onChange:n=>l(r,"option1",n.target.value),value:a.option1})]}),e.jsxs("div",{className:"flex ",children:[e.jsx(A,{value:"option2",checked:a.answer==="option2",onChange:n=>l(r,"answer",n.target.value)}),e.jsx(h,{label:"option B",error:o.errors[`questions.${r}.option2`],helperText:o.errors[`questions.${r}.option2`],onChange:n=>l(r,"option2",n.target.value),value:a.option2})]})]}),e.jsxs("div",{className:"flex py-5 justify-between",children:[e.jsxs("div",{className:"flex ",children:[e.jsx(A,{value:"option3",checked:a.answer==="option3",onChange:n=>l(r,"answer",n.target.value)}),e.jsx(h,{label:"option C",placeholder:"optional",error:o.errors[`questions.${r}.option3`],helperText:o.errors[`questions.${r}.option3`],onChange:n=>l(r,"option3",n.target.value),value:a.option3})]}),e.jsxs("div",{className:"flex ",children:[e.jsx(A,{value:"option4",checked:a.answer==="option4",onChange:n=>l(r,"answer",n.target.value)}),e.jsx(h,{label:"option D",placeholder:"optional",error:o.errors[`questions.${r}.option4`],helperText:o.errors[`questions.${r}.option4`],onChange:n=>l(r,"option4",n.target.value),value:a.option4})]})]})]})]})})]})," ",e.jsx("div",{className:"w-10 flex justify-center items-center bg-red-400 rounded-md cursor-pointer",onClick:()=>x(r),children:e.jsx(ce,{})})]},r))})]})]}),e.jsx("div",{className:"flex w-full",children:e.jsx(G,{fullWidth:!0,variant:"contained",type:"submit",disabled:o.processing,children:t?"update":"submit"})})]})})})]})};export{Fe as default};
