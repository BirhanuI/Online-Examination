import{r as x,W as A,j as e}from"./app-4AVB-xW9.js";import{A as w}from"./addSubject-74pPvSf4.js";import{M as F}from"./Modal-BAhfICXY.js";import{d as n}from"./dayjs.min-CJzdtE6_.js";import{B as g}from"./react-toastify.esm-DiskrPYb.js";import{T as i,F as j,b as z,I as E,S as G,a as L}from"./TextField-1d2FlS23.js";import{R as $}from"./RadioGroup-EZyR4YAf.js";import{F as _}from"./FormControlLabel-D0br0OI6.js";import{R as h}from"./Radio-C1H0JqQE.js";import{L as R,A as k,D as B}from"./AdapterDayjs-EswokJYi.js";import{B as c}from"./Button-DHHNnPFa.js";import{A as b}from"./Add-Q6ECX_pQ.js";import{M as v}from"./MenuItem-DHBnDkhK.js";import"./transition-UbmxnPUr.js";import"./ButtonBase-CKr4Mqe7.js";import"./useFormControl-VebDDcz3.js";import"./Typography-BpfBIk1Y.js";import"./SwitchBase-S_xZmFuQ.js";import"./index-pPMBbdvQ.js";import"./dividerClasses-v2qh6TOH.js";const ne=({show:y,onClose:C,teacher:a,subject:S})=>{const[N,p]=x.useState(!1),{data:l,setData:r,errors:t,reset:m,setError:I,post:Y,put:M,clearErrors:D}=A({first_name:a?a.first_name:"",last_name:a?a.last_name:"",email:a?a.email:"",phone:a?a.phone:"",address:a?a.address:"",city:a?a.city:"",state:a?a.state:"",gender:a?a.gender:"female",date_of_birth:a?n(a.date_of_birth).format("YYYY-MM-DD"):n().format("YYYY-MM-DD"),grade_section:a?a.grade_section:[{grade_id:"",section_id:"",subject_id:""}]});x.useEffect(()=>{a?r({first_name:a.first_name,last_name:a.last_name,email:a.user?a.user.email:"",phone:a.phone,address:a.address,city:a.city,state:a.state,gender:a.gender,date_of_birth:n(a.date_of_birth).format("YYYY-MM-DD"),grade_section:a.grade_section}):m()},[a]);function T(s){s.preventDefault(),a?M(route("teacher.update",a.id),{onSuccess:()=>{m(),g.success("Student updated successfully"),onclose(!1)}}):Y(route("teacher.store"),{onSuccess:()=>{m(),g.success("Student added successfully"),onclose(!1)}})}const u=(s,o,d)=>{D();const f=[...l.grade_section];f[s][o]=d,r({...l,grade_section:f})};function W(){r("grade_section",[...l.grade_section,{grade_id:"",section_id:"",subject_id:""}])}return e.jsxs(F,{show:y,onClose:C,children:[e.jsx(w,{show:N,onClose:p}),e.jsx("h2",{className:"p-5 pb-0 text-center text-2xl font-bold",children:"Add Teacher"}),e.jsxs("form",{onSubmit:T,className:"p-10 flex flex-col gap-5 pt-5 overflow-y-auto max-h-[500px]",children:[e.jsxs("div",{className:"w-full flex gap-5",children:[e.jsx(i,{fullWidth:!0,label:"First Name",value:l.first_name,onChange:s=>r("first_name",s.target.value),error:t.first_name,helperText:t.first_name}),e.jsx(i,{fullWidth:!0,label:"Last Name",value:l.last_name,onChange:s=>r("last_name",s.target.value),error:t.last_name,helperText:t.last_name})]}),e.jsx(i,{fullWidth:!0,label:"Email",value:l.email,onChange:s=>r("email",s.target.value),error:t.email,helperText:t.email}),e.jsx(i,{fullWidth:!0,label:"Phone",placeholder:"optional",value:l.phone,onChange:s=>r("phone",s.target.value),error:t.phone,helperText:t.phone}),e.jsxs("div",{className:"flex gap-5",children:[e.jsx(j,{fullWidth:!0,children:e.jsxs("div",{className:"flex gap-5 items-center border p-[7px] rounded-md border-gray-300",children:[e.jsx(z,{id:"demo-radio-buttons-group-label",children:"Gender"}),e.jsx($,{value:l.gender,name:"radio-buttons-group",children:e.jsxs("div",{className:"",children:[e.jsx(_,{value:"female",control:e.jsx(h,{}),label:"Female",onChange:s=>r("gender",s.target.value)}),e.jsx(_,{value:"male",control:e.jsx(h,{}),label:"Male",onChange:s=>r("gender",s.target.value)})]})})]})}),e.jsx(R,{dateAdapter:k,children:e.jsx(B,{className:"w-full",label:"Date of Birth",value:n(l.date_of_birth),onChange:s=>r("date_of_birth",n(s).format("YYYY-MM-DD"))})})]}),e.jsx(i,{fullWidth:!0,label:"Address",value:l.address,onChange:s=>r("address",s.target.value),error:t.address,helperText:t.address}),e.jsxs("div",{className:"flex gap-5",children:[e.jsx(i,{fullWidth:!0,label:"City",value:l.city,onChange:s=>r("city",s.target.value),error:t.city,helperText:t.city}),e.jsx(i,{fullWidth:!0,label:"State",value:l.state,onChange:s=>r("state",s.target.value),error:t.state,helperText:t.state})]}),e.jsxs("div",{className:"border p-3 rounded border-gray-300",children:[e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsx("p",{className:"capitalize text-sm mb-2 text-blue-500",children:"add multiple section by separating with comma"}),e.jsxs(c,{onClick:W,variant:"outlined",size:"small",className:"flex items-end",children:[e.jsx(b,{}),"add"]})]}),e.jsx("div",{className:"flex flex-col gap-3 mt-3",children:l.grade_section.map((s,o)=>e.jsxs("div",{className:"flex gap-5 w-full",children:[e.jsx(i,{fullWidth:!0,label:"Grade",type:"number",value:s.grade_id,size:"small",onChange:d=>u(o,"grade_id",d.target.value),error:t[`grade_section.${o}.grade_id`],helperText:t[`grade_section.${o}.grade_id`]}),e.jsx(i,{fullWidth:!0,label:"Section",size:"small",value:s.section_id,onChange:d=>u(o,"section_id",d.target.value),error:t[`grade_section.${o}.section_id`],helperText:t[`grade_section.${o}.section_id`]}),e.jsxs(j,{fullWidth:!0,error:t[`grade_section.${o}.subject_id`],size:"small",children:[e.jsx(E,{children:"Subject"}),e.jsxs(G,{value:s.subject_id,label:"Subject",onChange:d=>u(o,"subject_id",d.target.value),children:[e.jsx(v,{value:"",onClick:()=>p(!0),children:e.jsxs("div",{className:"text-gray-400",children:[e.jsx(b,{})," add Subject"]})}),S.map(d=>e.jsx(v,{value:d.id,children:d.name},d.id))]}),e.jsx(L,{children:t[`grade_section.${o}.subject_id`]})]})]}))})]}),e.jsxs("div",{className:"flex gap-5 justify-end",children:[e.jsx(c,{variant:"contained",color:"error",onClick:()=>m(),children:"cancel"}),e.jsx(c,{type:"submit",variant:"contained",children:a?"update":"submit"})]})]})]})};export{ne as default};
